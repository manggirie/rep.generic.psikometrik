@using Bespoke.epsikologi_skorukbp.Domain
@using web.sph.App_Code
@model web.sph.App_Code.UkbpTraitViewModel
@{
    Layout = "_MasterPage.NoHeader.cshtml";
   
}
@section head
{
    <style type="text/css">
        table {
            font-size: 8px;
        }

            table.table-bordered2 td, th {
                border: 1px solid #000000;
                padding: 2px;
            }

            table.table-bordered2 th {
                text-align: center;
                background-color: lightskyblue;
            }

            table#bahagian-a {
                border-spacing: 5px;
                border-collapse: separate;
                width: 100%;
            }

        h1 {
            font-size: small;
        }

        td.header {
            font-weight: bold;
        }

        
        td.label {
            padding: 10px;
            font-size: small;
            font-weight: bold;
            color: #000000;
        }
    </style>
}




@helper DisplayRow(int start, int max, int step, string trait, string no, SkorUkbp skor, string header = null)
{
var column = 20;
var headerText = header ?? trait;
    <tr>
        @if (!string.IsNullOrEmpty(no))
        {

            <td class="header">@no</td>
            <td class="header">@headerText</td>
        }
        else
        {
            <td></td>
            <td>@headerText</td>
        }

        @for (var i = start; i <= max; i += step)
        {
            column--;
            var td = Model.TdCollection.SingleOrDefault(x => x.Tret == trait && x.Value == i);
            var on = skor.Percentile == i ? "-on" : "";
            if (null == td)
            {
                throw new Exception($"Cannot find {i}");
            }
            <td>
                <img alt="@i" src="/images/ukbp/@(td.Image)@(on).png" id="kby-@i" />
            </td>
        }


        @if (column > 0)
        {
            <td colspan="@column"></td>
        }
    </tr>

}



<h1>    LAPORAN UJIAN KHAS BIASISWA PERSEKUTUAN JABATAN PERKHIDMATAN AWAM</h1>
<table>
    <colgroup>
        <col style="width: 17%" />
        <col style="width: 17%" />
        <col style="width: 17%" />
        <col style="width: 17%" />
        <col style="width: 17%" />
        <col style="width: 17%" />
    </colgroup>
    <tr>
        <td>Nama Calon :</td>
        <td></td>
        <td>No. Kad Pengenalan :</td>
        <td></td>
        <td>Pusat Temuduga :</td>
        <td></td>
    </tr>
</table>

<strong>BAHAGIAN A: PERSONALITI</strong>
<table id="bahagian-a">
    <colgroup>
        <col style="width: 20px" />
        <col style="width: 200px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
        <col style="width: 30px" />
    </colgroup>
    @DisplayRow(1, 15, 1, UkbpTraitViewModel.KEBOLEHPERCAYAAN, "1", Model.KBY)
    @DisplayRow(1, 20, 1, UkbpTraitViewModel.NASIONALISME, "2", Model.NAS)


    <tr>
        <td class="header">3</td>
        <td class="header">Pengurusan Emosi</td>
        <td colspan="20"></td>
    </tr>

    @DisplayRow(5, 100, 5, UkbpTraitViewModel.KETENANGAN, "", Model.KTG, "(a) Ketenangan")
    @DisplayRow(5, 100, 5, UkbpTraitViewModel.KECERIAAN, "", Model.KCN, "(b) Keceriaan")
    @DisplayRow(5, 100, 5, UkbpTraitViewModel.LUAHAN_PERASAAN, "", Model.LPN, "(c) Luahan Perasaan")
    @DisplayRow(5, 100, 5, UkbpTraitViewModel.BERSIMPATI, "", Model.SIM, "(d) Bersimpati")



    <tr>
        <td class="header">4</td>
        <td class="header">Pengurusan Pemikiran</td>
        <td colspan="20"></td>
    </tr>
    @DisplayRow(5, 100, 5, UkbpTraitViewModel.BERFIKIRAN_RASIONAL, "", Model.RAS, "(a) Berfikiran Rasional")

    <tr>
        <td class="header">5</td>
        <td class="header">Pengurusan Tingkah Laku</td>
        <td colspan="20"></td>
    </tr>
    @DisplayRow(5, 100, 5, UkbpTraitViewModel.AKTIF_SOSIAL, "", Model.AKS, "(a) Aktif Sosial")
    @DisplayRow(5, 100, 5, UkbpTraitViewModel.BERSIKAP_ASERTIF, "", Model.ASF, "(b) Bersikap Asertif")
    @DisplayRow(5, 100, 5, UkbpTraitViewModel.BERTOLERANSI, "", Model.TOL, "(c) Bertoleransi")
    @DisplayRow(5, 100, 5, UkbpTraitViewModel.PENYIMPANGAN_TINGKAH_LAKU, "", Model.PTL, "(d) Penyimpangan Tingkah Laku")

</table>

<table>
    <colgroup>
        <col style="width: 100px" />
        <col style="width: 100px" />
        <col style="width: 100px" />
        <col style="width: 100px" />
    </colgroup>
    <tr>
        <td style="text-align: center"><img alt="Rendah" src="~/images/ukbp/VeryLight-0.png" /></td>
        <td style="text-align: center"><img alt="Rendah" src="~/images/ukbp/Light-0.png" /></td>
        <td style="text-align: center"><img alt="Rendah" src="~/images/ukbp/Dark-0.png" /></td>
        <td style="text-align: center"><img alt="Rendah" src="~/images/ukbp/VeryDark-0.png" /></td>
    </tr>
    <tr>
        <td style="vertical-align: top;text-align: center" class="border">Rendah</td>
        <td style="text-align: center" class="bordered">Sederhana Rendah</td>
        <td style="text-align: center">Sederhana Tinggi</td>
        <td style="text-align: center;vertical-align: top">Tinggi</td>
    </tr>
</table>

<strong>BAHAGIAN B: MINAT</strong>
<table style="width: 100%">
    <colgroup>
        <col style="width: 18%"/>
        <col style="width: 16%"/>
        <col style="width: 18%"/>
        <col style="width: 16%"/>
        <col style="width: 18%"/>
        <col style="width: 16%"/>
    </colgroup>
    <tr>
        <td>Bidang Pengajian Yang Dipohon:</td>
        <td class="label">@Model.Pengguna.Pelajar.BidangPengajian</td>
        <td>Kod Minat 1:</td>
        <td class="label">@Model.KodMinat1.KodKerjaya1 / @Model.KodMinat1.KodKerjaya2</td>
        <td>Kod Minat 2:</td>
        <td class="label">@Model.KodMinat2.KodKerjaya1 / @Model.KodMinat2.KodKerjaya2</td>
    </tr>
</table>


<table style="border-collapse: collapse; border: 0.5px solid #000000; width: 100%" class="table-bordered2">
    <colgroup>
        <col style="width: 200px" />
        <col style="width: 200px" />
        <col style="width: 800px" />
    </colgroup>
    <thead>
        <tr>
            <th>Tret</th>
            <th>Tahap</th>
            <th>Ulasan</th>
        </tr>
    </thead>
    <tr>
        <td>Kebolehpercayaan</td>
        <td>@Model.KBY.Skor</td>
        <td>@Model.RecommendationKBY.Text</td>
    </tr>
    <tr>
        <td>Ketenangan</td>
        <td>@Model.KTG</td>
        <td>@Model.RecommendationKTG.Text</td>
    </tr>
    <tr>
        <td>Keceriaan</td>
        <td>@Model.KCN</td>
        <td>@Model.RecommendationKCN.Text</td>
    </tr>
    <tr>
        <td>Luahan Perasaan</td>
        <td>@Model.LPN</td>
        <td>@Model.RecommendationLPN.Text</td>
    </tr>
    <tr>
        <td>Bersimpati</td>
        <td>@Model.SIM</td>
        <td>@Model.RecommendationSIM.Text</td>
    </tr>
    <tr>
        <td>Berfikiran Rasional</td>
        <td>@Model.RAS</td>
        <td>@Model.RecommendationRAS.Text</td>
    </tr>
    <tr>
        <td>Aktif Sosial</td>
        <td>@Model.AKS</td>
        <td>@Model.RecommendationAKS.Text</td>
    </tr>
    <tr>
        <td>Bersikap Asertif</td>
        <td>@Model.ASF</td>
        <td>@Model.RecommendationASF.Text</td>
    </tr>
    <tr>
        <td>Bertoleransi</td>
        <td>@Model.TOL</td>
        <td>@Model.RecommendationTOL.Text</td>
    </tr>
    <tr>
        <td>Penyimpangan Tingkah Laku</td>
        <td>@Model.PTL</td>
        <td>@Model.RecommendationPTL.Text</td>
    </tr>
    <tr>
        <td>Nasionalisme</td>
        <td>@Model.NAS</td>
        <td>@Model.RecommendationNAS.Text</td>
    </tr>
</table>